language: cpp
os: 
  - linux
  - osx
compiler:
  - gcc
  - clang

# For now disable gcc on osx as g++4.8 is not yet available
#matrix:
#  exclude:
#    - os: osx
#      compiler: gcc
#
#

before_install:
  #  - echo $TRAVIS_OS_NAME
  - sudo add-apt-repository "deb http://us.archive.ubuntu.com/ubuntu/ trusty main universe"
    #  - sudo add-apt-repository -y "deb http://ftp.icm.edu.pl/pub/Linux/debian/ sid main"
    #  - sudo sh .travis/add-trusty
  - sudo apt-get update
  - sudo apt-get install -t trusty -y libboost-thread-dev libboost-timer-dev libblitz0-dev gnuplot-nox libhdf5-serial-dev cmake libgnuplot-iostream-dev
  - sudo apt-get -f install
  - sudo apt-get update
  - sudo apt-get -f install
    #  - sudo apt-get install -t trusty -y libboost-thread-dev libboost-timer-dev libboost-iostreams-dev libboost-filesystem-dev libblitz0-dev cmake
    #- sudo apt-get install -qq libboost-thread1.48-dev libboost-filesystem1.48-dev libboost-timer1.48-dev libboost-date-time1.48-dev 
    #  - sudo apt-get install -y --allow-unauthenticated debian-archive-keyring
    #  - sudo apt-get install -y --allow-unauthenticated libboost-thread-dev libboost-timer-dev libblitz0-dev gnuplot-nox libhdf5-serial-dev libgnuplot-iostream-dev cmake

before_script:
    - mkdir build && cd build
    - cmake -DCMAKE_BUILD_TYPE=RELEASE ../
    - cd tests/unit/kahan_sum/

script:
    - make

after_script:
    - make test
